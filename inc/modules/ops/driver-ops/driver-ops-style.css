/**
 * ==========================================================
 * Kingdom Nexus â€” Driver OPS Dashboard Styles (v1.0)
 * ----------------------------------------------------------
 * - NEXUS SHELL tokens + consistent components
 * - Mobile-first, serious, readable
 * - Modals + toasts + focus visible
 * - Respects prefers-reduced-motion
 * ==========================================================
 */

#knx-driver-ops-dashboard.knx-driver-ops-wrapper{
  --nxs-primary: #0b793a;
  --nxs-card: #ffffff;
  --nxs-bg: #f6f7f9;
  --nxs-text: #0b1220;
  --nxs-muted: #6b7280;

  --nxs-border: rgba(11,18,32,0.08);
  --nxs-border-2: rgba(11,18,32,0.06);
  --nxs-shadow: 0 12px 30px rgba(11,18,32,0.08);
  --nxs-shadow-sm: 0 8px 20px rgba(11,18,32,0.06);

  --nxs-radius: 14px;
  --nxs-radius-sm: 12px;

  background: var(--nxs-card);
  color: var(--nxs-text);
  border: 1px solid var(--nxs-border);
  box-shadow: var(--nxs-shadow);
  border-radius: var(--nxs-radius);
  max-width: 1100px;
  margin: 18px auto;
  padding: 18px;
}

@media (min-width: 769px){
  #knx-driver-ops-dashboard.knx-driver-ops-wrapper{
    margin: 42px auto;
    padding: 26px;
  }
}

#knx-driver-ops-dashboard .sr-only{
  position:absolute;
  width:1px;
  height:1px;
  padding:0;
  margin:-1px;
  overflow:hidden;
  clip:rect(0,0,0,0);
  white-space:nowrap;
  border:0;
}

/* Header */
#knx-driver-ops-dashboard .knx-driver-ops-header{
  display:flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 10px;
}

@media (min-width: 820px){
  #knx-driver-ops-dashboard .knx-driver-ops-header{
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
  }
}

#knx-driver-ops-dashboard .knx-driver-ops-title h2{
  margin: 0;
  font-size: 1.25rem;
  font-weight: 800;
  letter-spacing: -0.01em;
}

#knx-driver-ops-dashboard .knx-driver-ops-sub{
  margin-top: 4px;
  color: var(--nxs-muted);
  font-size: 0.95rem;
}

#knx-driver-ops-dashboard .knx-driver-ops-controls{
  display:flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center;
}

#knx-driver-ops-dashboard .knx-field{
  flex: 1 1 280px;
}

#knx-driver-ops-dashboard .knx-input{
  width: 100%;
  padding: 12px 14px;
  border-radius: 10px;
  border: 1px solid var(--nxs-border-2);
  background: #fff;
  color: var(--nxs-text);
  outline: none;
}

#knx-driver-ops-dashboard .knx-input:focus{
  outline: 3px solid rgba(11,121,58,0.14);
  outline-offset: 2px;
  border-color: rgba(11,121,58,0.35);
}

#knx-driver-ops-dashboard .knx-live{
  display:flex;
  align-items:center;
  gap: 8px;
  padding: 8px 10px;
  border: 1px solid var(--nxs-border-2);
  border-radius: 12px;
  background: rgba(11,18,32,0.02);
}

#knx-driver-ops-dashboard .knx-live-label{
  font-weight: 700;
  color: var(--nxs-muted);
  font-size: 14px;
}

/* Buttons */
#knx-driver-ops-dashboard .knx-btn{
  background: var(--nxs-primary);
  color: var(--nxs-card);
  border: 0;
  border-radius: 10px;
  padding: 12px 14px;
  cursor: pointer;
  font-weight: 700;
  transition: transform .12s ease, box-shadow .18s ease, background .18s ease;
  box-shadow: 0 10px 22px rgba(11,121,58,0.14);
}

#knx-driver-ops-dashboard .knx-btn:hover{ transform: translateY(-1px); }
#knx-driver-ops-dashboard .knx-btn:active{ transform: translateY(0); }

#knx-driver-ops-dashboard .knx-btn-secondary{
  background: transparent;
  color: var(--nxs-muted);
  border: 1px solid var(--nxs-border-2);
  border-radius: 10px;
  padding: 12px 14px;
  cursor: pointer;
  font-weight: 700;
  transition: transform .12s ease, background .18s ease, border-color .18s ease;
}

#knx-driver-ops-dashboard .knx-btn-secondary:hover{
  background: rgba(11,18,32,0.03);
  transform: translateY(-1px);
  border-color: rgba(11,18,32,0.10);
}

#knx-driver-ops-dashboard .knx-btn:focus-visible,
#knx-driver-ops-dashboard .knx-btn-secondary:focus-visible{
  outline: 3px solid rgba(11,121,58,0.14);
  outline-offset: 2px;
}

/* Switch */
#knx-driver-ops-dashboard .knx-switch{
  position: relative;
  display: inline-block;
  width: 46px;
  height: 26px;
}

#knx-driver-ops-dashboard .knx-switch input{
  opacity: 0;
  width: 0;
  height: 0;
}

#knx-driver-ops-dashboard .knx-slider{
  position: absolute;
  inset: 0;
  cursor: pointer;
  background-color: #cfd3d8;
  border-radius: 999px;
  transition: 0.25s;
}

#knx-driver-ops-dashboard .knx-slider:before{
  position: absolute;
  content: "";
  height: 18px;
  width: 18px;
  left: 4px;
  bottom: 4px;
  background: #fff;
  border-radius: 999px;
  transition: 0.25s;
  box-shadow: 0 6px 16px rgba(11,18,32,0.12);
}

#knx-driver-ops-dashboard .knx-switch input:checked + .knx-slider{
  background-color: var(--nxs-primary);
}

#knx-driver-ops-dashboard .knx-switch input:checked + .knx-slider:before{
  transform: translateX(20px);
}

/* Meta line */
#knx-driver-ops-dashboard .knx-driver-ops-meta{
  display:flex;
  align-items:center;
  gap: 10px;
  color: var(--nxs-muted);
  font-weight: 700;
  font-size: 14px;
  margin: 6px 0 16px;
}

#knx-driver-ops-dashboard .knx-meta-dot{
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: #cfd3d8;
  box-shadow: 0 0 0 4px rgba(11,18,32,0.04);
}

#knx-driver-ops-dashboard .knx-meta-dot[data-live="1"]{
  background: var(--nxs-primary);
  box-shadow: 0 0 0 4px rgba(11,121,58,0.14);
}

/* List + cards */
#knx-driver-ops-dashboard .knx-driver-ops-list{
  display: grid;
  gap: 12px;
}

@media (min-width: 900px){
  #knx-driver-ops-dashboard .knx-driver-ops-list{
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

#knx-driver-ops-dashboard .knx-empty{
  padding: 16px;
  border: 1px dashed rgba(11,18,32,0.14);
  border-radius: 12px;
  background: rgba(11,18,32,0.02);
  color: var(--nxs-muted);
  font-weight: 700;
}

#knx-driver-ops-dashboard .knx-order-card{
  background: var(--nxs-card);
  border: 1px solid var(--nxs-border-2);
  border-radius: 14px;
  box-shadow: var(--nxs-shadow-sm);
  padding: 14px;
  display:flex;
  flex-direction: column;
  gap: 12px;
}

@media (min-width: 900px){
  #knx-driver-ops-dashboard .knx-order-card{
    padding: 16px;
  }
}

#knx-driver-ops-dashboard .knx-order-top{
  display:flex;
  align-items:flex-start;
  justify-content: space-between;
  gap: 12px;
}

#knx-driver-ops-dashboard .knx-order-number{
  font-weight: 800;
  letter-spacing: -0.01em;
  font-size: 1rem;
}

#knx-driver-ops-dashboard .knx-order-sub{
  margin-top: 8px;
  display:flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
}

#knx-driver-ops-dashboard .knx-order-total{
  font-weight: 900;
  font-size: 1.05rem;
}

#knx-driver-ops-dashboard .knx-order-addr{
  display:flex;
  gap: 10px;
  align-items:flex-start;
  color: var(--nxs-text);
  line-height: 1.35;
}

#knx-driver-ops-dashboard .knx-addr-icon{
  margin-top: 1px;
}

#knx-driver-ops-dashboard .knx-order-actions{
  display:flex;
  gap: 10px;
}

#knx-driver-ops-dashboard .knx-order-actions .knx-btn,
#knx-driver-ops-dashboard .knx-order-actions .knx-btn-secondary{
  flex: 1 1 auto;
}

/* Pills */
#knx-driver-ops-dashboard .knx-pill{
  display:inline-flex;
  align-items:center;
  padding: 7px 11px;
  border-radius: 999px;
  font-weight: 800;
  font-size: 12px;
  border: 1px solid rgba(11,18,32,0.06);
  background: rgba(11,18,32,0.03);
  color: var(--nxs-muted);
}

#knx-driver-ops-dashboard .knx-pill.is-good{
  background:#F0FCF4;
  color:#0B6623;
}

#knx-driver-ops-dashboard .knx-pill.is-warn{
  background:#FFF8E6;
  color:#7a5b10;
}

#knx-driver-ops-dashboard .knx-pill.is-info{
  background:#EFF6FF;
  color:#1E3A8A;
}

#knx-driver-ops-dashboard .knx-time{
  color: var(--nxs-muted);
  font-weight: 700;
  font-size: 12px;
}

/* Modals (canon) */
.knx-modal{
  display:none;
  position: fixed;
  inset: 0;
  background: rgba(11,18,32,0.48);
  z-index: 99999;
  padding: 10px;
  align-items: center;
  justify-content: center;
}

.knx-modal.active{ display:flex; }

.knx-modal-content{
  width: 100%;
  max-width: 460px;
  background: var(--nxs-card);
  border-radius: 12px;
  border: 1px solid rgba(11,18,32,0.06);
  box-shadow: 0 18px 44px rgba(11,18,32,0.12);
  padding: 16px;
  animation: knxModalIn .18s cubic-bezier(.2,.9,.2,1);
}

.knx-modal-head{
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 10px;
}

.knx-modal-head h3{
  margin:0;
  font-size: 1.05rem;
  font-weight: 900;
  letter-spacing: -0.01em;
  color: var(--nxs-text);
}

.knx-modal-x{
  appearance:none;
  border: 1px solid rgba(11,18,32,0.08);
  background: rgba(11,18,32,0.03);
  border-radius: 10px;
  width: 40px;
  height: 40px;
  cursor:pointer;
  font-weight: 900;
  color: var(--nxs-text);
}

.knx-modal-x:focus-visible{
  outline: 3px solid rgba(11,121,58,0.14);
  outline-offset: 2px;
}

.knx-modal-body{
  color: var(--nxs-text);
}

.knx-modal-actions{
  display:flex;
  gap: 10px;
  justify-content: flex-end;
  margin-top: 14px;
}

.knx-modal-actions .knx-btn,
.knx-modal-actions .knx-btn-secondary{
  border-radius: 10px;
  padding: 12px 14px;
  font-weight: 700;
}

.knx-modal-grid{
  display:grid;
  gap: 10px;
  margin-bottom: 12px;
}

.knx-modal-row{
  display:flex;
  align-items:flex-start;
  justify-content: space-between;
  gap: 12px;
  padding: 10px 12px;
  border: 1px solid rgba(11,18,32,0.06);
  border-radius: 12px;
  background: rgba(11,18,32,0.02);
}

.knx-k{
  color: var(--nxs-muted);
  font-weight: 800;
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: .04em;
}

.knx-v{
  text-align: right;
}

.knx-breakdown{
  border: 1px solid rgba(11,18,32,0.06);
  border-radius: 12px;
  padding: 12px;
  background: #fff;
}

.knx-break-row{
  display:flex;
  justify-content: space-between;
  gap: 12px;
  padding: 8px 0;
  border-bottom: 1px solid rgba(11,18,32,0.06);
  color: var(--nxs-text);
  font-weight: 700;
}

.knx-break-row:last-child{ border-bottom: 0; }

.knx-confirm-text{
  color: var(--nxs-muted);
  font-weight: 700;
  margin: 0 0 10px;
}

@keyframes knxModalIn{
  from{ opacity: 0; transform: translateY(10px); }
  to{ opacity: 1; transform: translateY(0); }
}

/* Toast fallback (only if global knxToast missing) */
.knx-toast-stack{
  position: fixed;
  bottom: 18px;
  right: 18px;
  z-index: 100000;
  display:flex;
  flex-direction: column;
  gap: 8px;
  max-width: min(92vw, 420px);
}

.knx-toast{
  background: #0b1220;
  color: #fff;
  padding: 12px 14px;
  border-radius: 12px;
  box-shadow: 0 10px 26px rgba(11,18,32,0.18);
  font-weight: 800;
  transition: opacity .22s ease, transform .22s ease;
}

.knx-toast.out{
  opacity: 0;
  transform: translateY(8px);
}

.knx-toast[data-type="success"]{ background: #0b793a; }
.knx-toast[data-type="error"]{ background: #7A1010; }
.knx-toast[data-type="warning"]{ background: #7a5b10; }
.knx-toast[data-type="info"]{ background: #0b1220; }

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  #knx-driver-ops-dashboard *{
    transition: none !important;
    animation: none !important;
    scroll-behavior: auto !important;
  }
}
